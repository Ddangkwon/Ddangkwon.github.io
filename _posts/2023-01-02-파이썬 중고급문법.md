---
layout : post
title : 파이썬 중고급문법
comments : true
categories : 
- python
tags : [python]
---
# 파이썬 중고급문법


## 변수 범위(Variable Scope)


- 먼저 함수 내 로컬에 변수가 있는지 확인하고 전역 변수를 확인한다.

```python
var = 10
def func():
    global var     
                 
    var = 20       
    print(var) # 20

func()    

print(var) # 10

```

- 로컬에서도 전역 변수를 사용함을 알리기 위해 global을 앞에 붙혀 사용하고 그 값을 재정의, 수정할 수 있다.

```python
var = 50
def func():
    global var     
                 
    var = 60       
    print(var) # 60

func()    

```

- 함수 내 함수(Closure) 사용시 변수를 내부에 공유할 때 nonlocal 예약어를 사용한다.

```python
def outer():
    var = 10
    def inner():
        nonlocal var    
        var += 10
        print(var) # 20
    return inner

in_test = outer() # Closure

in_test() # inner 함수 실행 => nonlocal 부재시 UnboundLocalError 발생
in_test()         

```

- locals() 메서드로 함수 내 지역 변수들을 모두 print 해볼 수 있음 => 디버깅 시 주로 사용

```python

def func(var): 
    x = 10 
    def printer():
        print('Printer func') 
    print('Func Inner', locals()) # 지역변수 x, var 호출

func("Hi") # var => "HI"

```

- 마찬가지로 globals() 메서드로 파일 내 전역 변수를 확인할 수 있다.

```python

var = 10
def func():
    global var     
    var = 20       
    print(var) # 20

func()    

print(var) # 10
print('Ex7 >', globals()) # 전역 전체 출력
globals()['test_variable'] = 100
print('Ex7 >', globals())

```

## Lambda 함수

람다함수의 장점
- 코드의 간결함 
- 메모리의 절약

함수처럼 별도의 메모리가 할당되지 않는다.
힙 영역을 사용하여 즉시 소멸한다.
파이썬 가비지 컬렉션

lambda 함수는 return 키워드 없이 표현식을 자동으로 리턴해준다.

lambda 매개변수 : 표현식

```python
cal = lambda x, y, z: x + y - z

print(cul(10, 15, 20))
```

## map 함수

- map(function, iterable)

첫 번째 매개변수로는 함수
두 번째 매개변수로는 반복 가능한 자료형(리스트, 튜플 등)

map 함수의 반환 값은 map객체 이기 때문에 해당 자료형을 list 혹은 tuple로 형 변환시켜주어야 한다.
```python
def square(x):
    return x **2
x = [x * 10 for x in range(10)]
# result = list(map(square , x))
result = list(map(lambda i: i ** 2 , x))

```

## Filter 함수

- filter(function, iterable)

filter 함수를 사용하면 특정 조건에 해당하는 리스트 원소들을 골라내는 역할을 한다.


```python
# 짝수만 골라내는 필터함수
lst = [i for i in range(1, 11)]
result = list(filter(lambda x: x % 2 == 0, lst))


def even_func(nums):
    def is_even(x):
        return x % 2 == 0
    return filter(is_even, nums)
lst2 = list(also_evens(digits2))
```

## reduce 함수

- reduce(function, iterable)

파이썬의 functools 내장 모듈의 reduce() 함수는 여러 개의 데이터를 대상으로 주로 누적 집계를 내기 위해서 사용합니다.

```python
from functools import reduce

diglstits3 = [x for x in range(1, 11)]

result = reduce(lambda x, y: x + y, lst)


def odd_func(nums):
    def plus(x, y):
        return x + y
    return reduce(plus, nums)

```


``` 파이썬의 Shallow Copy, Deep Copy

immutable : int, str, float, bool, unicode..
mutable : list...

Mutable 한 특성을 가진 자료형의 경우 그 특성 때문에 복사를 하는 경우 원본 배열의 값이 바뀌어 버릴 수 있다.(주소를 공유할 때)


Call by Reference(주소값 공유)
```python
# coppy
a_list = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
b_list = a_list


```
Shallow Copy
- 체를 새로운 객체로 복사하지만 원본 객체의 주소값을 복사하는 것

```python
# Shallow copy
import copy

c_list = [1, 2, 3, [4, 5, 6], [7, 8, 9]] # 안에 있는 리스트는 여전히 주소를 공유하고 있어 값 변경시 두 리스트 모두 원소값 변경
d_list = copy.copy(c_list) 

```

Deep Copy
- 내부에 객체들까지 모두 새롭게 copy 되는 것

```python
# Shallow copy
import copy

e_list = [1, 2, 3, [4, 5, 6], [7, 8, 9]] # 내부요소들까지 전부 새롭게 복사되었기 때문에 어떤 원소의 값을 변경하더라도 원본 값은 그대로 유지
f_list = copy.deepcopy(e_list) 

```