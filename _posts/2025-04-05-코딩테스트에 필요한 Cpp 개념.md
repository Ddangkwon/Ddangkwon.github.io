---
layout : post
title : 코딩테스트에 필요한 Cpp 개념
comments : true
categories : 
- CodingTest
tags : [CodingTest, C++]
---
# 코딩테스트에 필요한 Cpp 개념


# C++에서 priority_queue의 비교 함수가 구조체 형태로 작성되어야 하는 이유

## 1. 개요

C++의 priority_queue는 내부적으로 요소들을 정렬하기 위해 비교 연산자를 필요로 하며, 이 비교 연산자는 함수 객체(Functor) 형태로 제공되어야 합니다. 본 문서에서는 함수 객체가 필요한 이유와 일반 함수 형태가 아닌 구조체 형태로 제공되어야 하는 이유에 대해 설명합니다.

---

## 2. priority_queue의 템플릿 정의

```cpp
template<
    class T,
    class Container = std::vector<T>,
    class Compare = std::less<typename Container::value_type>
> class priority_queue;
```

### 템플릿 인자 중 Compare

- Compare는 두 요소를 비교하여 우선순위를 정하는 함수 객체(Functor)입니다.
- 기본값은 std::less<T>로, 이는 operator()를 정의한 구조체입니다.

---

## 3. 함수 객체(Functor)란?

함수 객체란 operator()를 오버로드하여 **함수처럼 동작하는 객체**를 말합니다. 일반 함수와 달리 함수 객체는 **상태를 가질 수 있고**, **템플릿 인자로 전달**될 수 있는 특징이 있습니다.

### 예시: 구조체 형태의 함수 객체

```cpp
struct compare {
    bool operator()(const T& a, const T& b) const {
        // 우선순위 조건 정의
    }
};
```

---

## 4. 왜 일반 함수가 아닌 구조체인가?

### 일반 함수

```cpp
bool compare(const T& a, const T& b) {
    return a < b;
}
```

이러한 일반 함수는 priority_queue의 템플릿 인자로 전달할 수 없습니다. priority_queue는 템플릿 인자로 함수 객체 타입(예: std::less<T>, 사용자 정의 비교 구조체 등)을 요구합니다. 함수 포인터(bool(*)(const T&, const T&)) 형태는 priority_queue의 세 번째 인자 형식과 호환되지 않습니다.

### 구조체는 가능

```cpp
priority_queue<T, vector<T>, compare> pq;
```

compare는 함수 객체로서 operator()를 제공하므로 템플릿 인자로 전달 가능하며, 이를 통해 priority_queue는 내부적으로 정렬 기준을 동작시킬 수 있습니다.

---

## 5. C++11 이후: 람다(lambda)를 사용하는 방법

C++11부터는 std::function을 활용해 람다를 비교 함수로 전달할 수도 있습니다. 이 방식은 가독성이 좋지만 약간의 성능 손실이 있습니다.

```cpp
auto cmp = [](const T& a, const T& b) {
    return a < b;
};

priority_queue<T, vector<T>, decltype(cmp)> pq(cmp);
```

---

## 6. 요약

| 방식            | 사용 가능 여부 | 설명 |
|----------------|----------------|------|
| 구조체 (Functor) | 가능         | operator()가 정의되어 있어 템플릿 인자로 전달 가능 |
| 일반 함수        | 불가능       | 함수는 템플릿 인자로 전달할 수 없음 |
| 람다 함수        | 가능 (C++11 이상) | decltype과 std::function 사용 시 가능 |

---

## 7. 결론

priority_queue는 정렬을 위해 함수 객체 형태의 비교 연산자를 요구하며, 이는 구조체에 operator()를 오버로드하여 제공하는 것이 일반적이다. 일반 함수는 템플릿 인자로 직접 전달할 수 없기 때문에 우선순위 비교를 위한 구조체 형태의 함수 객체가 필수적이다.

