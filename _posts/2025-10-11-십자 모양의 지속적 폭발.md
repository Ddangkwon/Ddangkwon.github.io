---
layout : post
title : 십자 모양의 지속적 폭발
comments : true
categories : 
- CodingTest
tags : [CodingTest, simulation]
---

# 십자 모양의 지속적 폭발

[https://www.codetree.ai/ko/trails/complete/curated-cards/challenge-cross-shape-continuous-bomb/description](https://www.codetree.ai/ko/trails/complete/curated-cards/challenge-cross-shape-continuous-bomb/description)



## 풀이

```cpp
#include <iostream>

using namespace std;

#define ARR_MAX_LEN 210

int N, M;

int dy[4] = { -1, 1, 0, 0 };
int dx[4] = { 0, 0, -1, 1 };
int arrmap[ARR_MAX_LEN][ARR_MAX_LEN] = { 0 };

void explode_marble(int col){
    int start_row = 0;
    for(int i = 1; i <= N; i++){
        if(arrmap[i][col] != 0){
            start_row = i;
            break;
        }
    }
    if (start_row == 0)
        return;
    int blow_coverage = arrmap[start_row][col];
    for(int i = 0; i < blow_coverage; i++){

        for(int dir = 0; dir < 4; dir++){
            int ny = start_row + (i * dy[dir]);
            int nx = col + (i * dx[dir]);

            if(ny < 1 || ny > N || nx < 1 || nx > N)
                continue;

            arrmap[ny][nx] = 0;
        }
    }

}

void drop_marble(){

    for(int c = 1; c <= N; c++){
        int end_idx = -1;

        for(int r = N; r > 1; r--){
            if(arrmap[r][c] == 0){
                end_idx = r;
                break;
            }
        }

        if(end_idx == -1)
            continue;
        
        for(int r = end_idx; r >= 1; r--){
            if(arrmap[r][c] != 0){
                
                arrmap[end_idx][c] = arrmap[r][c];
                arrmap[r][c] = 0;
                end_idx--;
            }
        }
    }

}

void print_answer(){
    for(int i = 1; i <= N; i++){
        for(int j = 1; j <= N; j++){
            cout << arrmap[i][j] << " ";
        }
        cout << "\n";
    }
}
void simulate(int col){

    // 1. 현재 열의 가장 상단의 값을 기준으로 폭발이 발생
    explode_marble(col);
    // 2. 폭발 이후 중력에 의한 Drop 시뮬레이션 수행
    drop_marble();


}
int main(void){

    ios::sync_with_stdio(false);
    cin.tie(NULL);
    cout.tie(NULL);

    cin >> N >> M;

    for(int i = 1; i <= N; i++){
        for(int j = 1; j <= N; j++){
            cin >> arrmap[i][j];
        }
    }


    for(int i = 0; i < M; i++){
        int sel_col;

        cin >> sel_col;

        simulate(sel_col);

    }

    print_answer();

    return 0;
}


```
