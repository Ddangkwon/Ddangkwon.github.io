---
layout : post
title : 우리는 하나
comments : true
categories : 
- CodingTest
tags : [CodingTest, BFS]
---

# 우리는 하나

[https://www.codetree.ai/ko/trails/complete/curated-cards/test-we-are-the-one/description](https://www.codetree.ai/ko/trails/complete/curated-cards/test-we-are-the-one/description)


## 풀이



```cpp
#include <iostream>
#include <queue>
#include <vector>
#include <algorithm>
#include <cstring>

using namespace std;

int n, k, u, d, answer = 0;
int grid[8][8] = { 0 };
bool isvisited[8][8] = { false };
int dy[4] = { -1, 1, 0, 0 };
int dx[4] = { 0, 0, -1, 1 };

typedef struct{
    int y;
    int x;
}loc_t;

vector<loc_t> cand_city;

int bfs(int y, int x){
    
    if(isvisited[y][x])
        return 0;

    int visit_cnt = 0;
    queue<loc_t> q;
    q.push({y, x});
    isvisited[y][x] = true;

    while(!q.empty()){
        int cy = q.front().y;
        int cx = q.front().x;
        q.pop();
        visit_cnt++;

        for(int dir = 0; dir < 4; dir++){
            int ny = cy + dy[dir];
            int nx = cx + dx[dir];

            if(ny < 0 || ny >= n || nx < 0 || nx >= n)
                continue;
            int diff = abs(grid[ny][nx] - grid[cy][cx]);
            if(diff >= u && diff <= d && !isvisited[ny][nx]){
                q.push({ny, nx});
                isvisited[ny][nx] = true;
            }
        }
    }


    return visit_cnt;
}

void comb(int idx, int cnt){

    if(cnt == k){
        int temp_answer = 0;
        memset(isvisited, 0, sizeof(isvisited));
        for(int i = 0; i < cand_city.size(); i++){
            temp_answer += bfs(cand_city[i].y, cand_city[i].x);
        }
        answer = max(answer, temp_answer);
        return ;
    }

    // 2차원 배열에 대한 조합 
    for(int i = idx; i < n * n; i++){
        int cy = i / n;
        int cx = i % n;
        cand_city.push_back({cy, cx});
        comb(i + 1, cnt + 1);
        cand_city.pop_back();
    }
}
int main() {
    cin >> n >> k >> u >> d;

    for (int i = 0; i < n; i++) {
        for (int j = 0; j < n; j++) {
            cin >> grid[i][j];
        }
    }

    comb(0, 0);

    cout << answer << "\n";
    return 0;
}


```