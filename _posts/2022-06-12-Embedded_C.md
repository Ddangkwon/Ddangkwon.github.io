---
layout : post
title : Embedded C 프로그래밍
comments : true
categories : 
- Embedded Engineering
tags : [Embedded Engineering]
---
# Embedded C 프로그래밍


## ISR(Interrupt Service Routine)

Interrupt handler 라고도 불리고 주로 외부 하드웨어적 요인이나 설정한 소프트웨어적 변경사항에 의해 발생하는 것을 사용자가 정의하고,
그 일이 발생할 경우 현재의 작업을 중단하고 우선 처리하는 작업을 말한다.
반대의 경우로는 폴링(Polling)이 있으며 폴링의 경우 해당 이벤트가 발생할 때까지 계속 확인하다가 발생하면 이벤트를 수행하는 것을 말한다.

이러한 인터럽트가 걸렸다는 신호로 IRQ(Interrput Request)라는 것이 있고, 이 IRQ가 어떤 Interrupt에 해당하는지를 구별해준다.

이러한 인터럽트에 관련된 플래그, 변수 등은 volatile로 선언된다.
=> 컴파일러 최적화 옵션에서 제외하여, 불분명한 결과를 야기하는 것을 피하기 위해서
### ISR 실행 과정

1. 주 프로그램 실행
2. 인터럽트 발생
3. 복귀주소(PC) 저장
4. 인터럽트 벡터로 점프
5. 인터럽트 처리
6. 인터럽트 처리 완료
7. 복귀주소 로드
8. 마지막에 실행된 주소로 점프
9. 1번 과정 다음 PC 위치로 이동

 
### 인터럽트 구성요소

1. 우선순위
=> 2개 이상의 요청이 동시에 들어올 경우 어떤 우선 순위로 서비스를 실행하는가?
2. 인터럽트 벡터(Interrput Vector)
=> 인터럽트 벡터는 인터럽트가 발생했을 때 할 일을 적어 놓은 것으로 ISR의 시작주소를 말한다.
3. 발원지
=> 인터럽트가 발생한 지점이 어디인가?

