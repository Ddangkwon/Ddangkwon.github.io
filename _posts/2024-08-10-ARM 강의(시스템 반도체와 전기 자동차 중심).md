---
layout : post
title : ARM 강의(시스템 반도체와 전기 자동차 중심)
comments : true
categories : 
- Embedded Engineering
tags : [Embedded Engineering]
---

# 시스템 소프트웨어 업계 동향: 2023년 이후 전망

## 1. 시스템 소프트웨어 분야 개요

시스템 소프트웨어는 컴퓨터 하드웨어와 사용자가 서로 상호작용할 수 있게 해주는 소프트웨어의 한 종류로, 주요하게는 운영 체제, 유틸리티 프로그램, 디바이스 드라이버 등을 포함합니다. 2023년 이후, 시스템 소프트웨어 업계는 다양한 기술적 발전과 글로벌 시장의 변화로 인해 급격한 성장을 기대하고 있습니다.

### 주요 동향
- **시스템 반도체**: 시스템 반도체는 컴퓨터나 전자 시스템 부품을 하나의 집적 회로에 통합한 SoC(System-on-Chip)와 같은 기술을 포함합니다. 이 분야는 자율 주행 자동차, IoT(사물 인터넷), 의료기기, 항공기 등의 기술 발전과 함께 중요성이 더욱 커지고 있습니다.
- **전기 자동차**: 전기 자동차는 자율 주행 및 인포테인먼트 시스템의 발전과 함께 시스템 소프트웨어의 핵심 응용 분야로 부상하고 있습니다.
- **IoT 및 의료기기**: IoT와 의료기기는 시스템 소프트웨어를 통해 다양한 스마트 기능과 연결성을 제공하며, 이는 앞으로도 더 많은 발전 가능성을 내포하고 있습니다.
- **AR/VR 디바이스**: 메타버스의 발전에 따라 AR(증강 현실) 및 VR(가상 현실) 디바이스의 개발이 활발히 이루어지고 있습니다. 이러한 디바이스들은 고성능의 시스템 소프트웨어를 필요로 하며, 이 시장의 성장과 함께 관련 소프트웨어의 수요도 증가하고 있습니다.

## 2. 시스템 반도체와 시스템 소프트웨어의 관계

시스템 반도체는 시스템 소프트웨어와 밀접한 관계를 맺고 있습니다. 시스템 반도체는 특정 하드웨어 기능을 지원하는 소프트웨어가 필요하며, 이로 인해 시스템 소프트웨어의 중요성이 부각됩니다.

### 주요 발전 동향
- **국가 차원의 시스템 반도체 육성**: 시스템 반도체는 국가 전략적으로 중요한 기술로, 많은 국가들이 이를 육성하기 위해 다양한 정책적 지원을 하고 있습니다. 예를 들어, 채용 계약 학과의 설치를 통해 시스템 반도체 관련 인력을 양성하고, 펩리스 스타트업에 대한 지원을 확대하고 있습니다.
- **미국의 투자**: 미국은 시스템 반도체 산업에 많은 투자를 하고 있으며, 관련 대학원에 예산을 지원하고 기업들에게 다양한 혜택을 제공합니다.

### 시스템 반도체 관련 소프트웨어 스택
- **Bootloader**: Little Kernel(LK), uboot 등.
- **RTOS(실시간 운영 체제)**: 다양한 실시간 응용 프로그램을 지원하기 위한 운영 체제.
- **Linux Kernel Driver**: 디바이스 드라이버, 시스템 프로그래밍 등을 포함하는 핵심 소프트웨어.
- **HAL(Hardware Adaptation Layer) 라이브러리**: 하드웨어 적응층으로서, 하드웨어와 소프트웨어 간의 상호작용을 지원.

## 3. 전기 자동차와 시스템 소프트웨어의 발전

전기 자동차 분야는 시스템 소프트웨어가 중요한 역할을 하는 대표적인 산업입니다. 자율 주행 시스템 및 인포테인먼트 시스템의 발전은 전기 자동차의 성능과 사용자 경험을 크게 향상시키고 있습니다.

### 주요 동향
- **전기 자동차 엔지니어의 증가**: 2022년 대비 2030년까지 전기 자동차 소프트웨어와 전자 엔지니어의 수는 10배 이상 증가할 것으로 예상됩니다.
- **SW와 전자 기술의 성장**: 전기 자동차 산업에서 소프트웨어와 전자 기술의 성장이 전체 시장의 성장을 앞지를 것으로 예상됩니다.

### 전기 자동차 개발 관련 소프트웨어 스택
- **Bootloader**: 전기 자동차에서 중요한 역할을 하는 소프트웨어 초기화 과정.
- **Linux Kernel Driver**: 전기 자동차 내 다양한 장치와 시스템을 제어하는 핵심 소프트웨어.
- **HAL**: 하드웨어와 소프트웨어 간의 인터페이스를 관리.
- **하이퍼바이저**: 가상화 기술을 통해 여러 운영 체제를 동시에 실행할 수 있게 함.
- **도메인 기술**: ISO26262 등 자동차 안전 기준과 OEM 스펙에 맞는 소프트웨어 개발이 필요.

### 전기 자동차 주요 요소 기술
- **자율 주행(ADAS)**: 고도화된 운전 보조 시스템으로, 안전성과 편의성을 제공.
- **인포테인먼트 시스템**: 운전자와 승객에게 다양한 정보와 엔터테인먼트를 제공하는 시스템.
- **Cyber Security**: 전기 자동차의 데이터 보호와 사이버 공격 방지를 위한 보안 기술.


#
# 시스템 소프트웨어 개발자가 되기 위해 필요한 준비 사항

## 1. 시스템 반도체 개발 과정 이해

시스템 반도체 개발은 여러 단계의 복잡한 과정으로 이루어집니다. 이를 이해하는 것은 시스템 소프트웨어 개발자에게 필수적입니다.

### 개발 과정
- **IP란?**: IP(Intellectual Property)는 재사용 가능하도록 기능을 모듈화하여 설계한 코어 디자인입니다. 이는 Digital IP와 Mixed IP로 나뉩니다.
- **개발 단계**:
  - Spec 확정
  - RTL 설계 (Verilog)
  - 합성/검증
  - 공정 개발
  - Wafer 작업
  - Packaging
  - Bring-up
  - 특성 평가
  - FPGA 검증
  - Back-End 개발
  - BSP 개발
  - System Integration
  - Engineering sample

### 개발 단계 세부 설명
- **1단계: 로직 설계**:
  - 로직 설계 단계에서 로직 설계 개발자와 시스템 소프트웨어 개발자가 소통합니다. 이는 매우 중요한 단계입니다.
- **2단계: 파운드리 업체와의 협업**:
  - 펩리스 업체는 주로 로직 설계를 담당하고, 파운드리 업체에서 칩 공정 개발을 수행합니다.
- **3단계: 브링업 (Bring-up)**:
  - 전원이나 클럭을 조정하면서 특성 평가 테스트를 수행합니다. IP와 시스템을 안정화하는 디버깅 작업이 포함됩니다.

## 2. SoC(시스템 온 칩) 개발 프로세스 및 생태계

SoC는 시스템 반도체의 핵심 구성 요소로, 시스템 소프트웨어 개발자는 이를 깊이 이해해야 합니다.

### SoC의 구성 요소와 생태계
- **SoC 벤더 개발 프로세스**:
  - SoC 벤더는 고객과 긴밀하게 협업하여 IP 설계, BSP 개발, 최종 SW 개발 등을 수행합니다.
  - 각종 소프트웨어 버전 릴리즈, 주요 버그 수정 및 성능 개선, SW 기능 구현이 포함됩니다.
- **주요 소프트웨어 스택**:
  - Bootloader: 초기 부팅 과정에서의 소프트웨어 스택.
  - HAL (Hardware Adaptation Layer): 하드웨어와 소프트웨어 간의 상호작용을 지원하는 계층입니다.
  - 리눅스 커널: SoC에서 다양한 장치와 시스템을 제어하는 핵심 소프트웨어.
  - 하이퍼바이저: 가상화 기술을 통해 여러 운영 체제를 동시에 실행할 수 있습니다.

## 3. 전기 자동차 개발과 시스템 소프트웨어

전기 자동차는 자율 주행, 인포테인먼트 시스템 등에서 시스템 소프트웨어가 중요한 역할을 합니다.

### 전기 자동차 개발 프로세스
- **자율 주행(ADAS)**:
  - CPU: Cortex-Ax(Cortex-A72), Cortex-R 계열
  - 하이퍼바이저, RTOS 등의 사용이 증가하고 있습니다.
- **인포테인먼트 시스템**:
  - CPU: Cortex-Ax(Cortex-A72) 계열
  - 리눅스 커널과 하이퍼바이저를 활용한 소프트웨어 개발이 필요합니다.

### 전기 자동차 주요 요소 기술
- **AI 기능 설계**:
  - NPU 설계
  - AI 기능을 Chipset IP로 설계하는 기술이 필요합니다.
- **핵심 소프트웨어 스택**:
  - 하이퍼바이저의 사용 증가
  - Rich OS 적용 (리눅스 운영체제)

## 4. 시스템 소프트웨어 개발자의 주요 기술 영역

시스템 소프트웨어 개발자는 다양한 기술을 익혀야 하며, 각 산업에 따라 요구되는 기술 스택이 다를 수 있습니다.

### 핵심 기술 영역 (Tech Area)
- **Arm 아키텍처**:
  - Cortex-A5x, Cortex-M3 등의 프로세서와 관련된 기술.
  - 익셉션 레벨, 어셈블리 명령어 등 하드웨어 관련 기술.
- **SoC 아키텍처**:
  - SoC의 설계 및 디버그 아키텍처 이해.
  - Boot Sequence 및 Memory 아키텍처 이해.
- **리눅스 커널**:
  - 디바이스 드라이버 개발, 프로세스 및 메모리 관리, 파일 시스템 관련 기술.
  - Ftrace 등의 디버깅 도구 사용.
- **개발 유틸리티**:
  - 빌드 아키텍처, 크로스 컴파일러, GIT 등 개발 도구 사용 능력.
- **Automotive 시스템 소프트웨어**:
  - ISO26262, OEM Feature, Cyber Security, Safety 등 자동차 관련 도메인 지식.

#
# 리눅스 시스템 소프트웨어 개발 관련 생태계

## 1. 리눅스 커널 오픈 소스 프로젝트

### 리눅스 커널 커뮤니티란?
- 리눅스 커널 커뮤니티는 리눅스 커널 개발의 중심으로, 커널의 기능 개발, 서브시스템 기능 개선, 논리적 오류 수정 등을 논의하는 공간입니다.
- 주요 링크:
  - [리눅스 커널 메일링 리스트](https://lkml.org)
  - [Kernel.org](https://www.kernel.org/)

### 리눅스 커널 브랜치
- **메인 라인 커널**: 가장 최신의 커널 버전.
- **Stable Kernel (LTS)**: 장기 지원 버전으로, 안정성을 중시하는 사용자들에게 적합.

### 주요 리눅스 커널 오픈 소스 개발자
- **리누스 토발즈**: 리눅스 커널 개발의 총책임자로 전체 개발 방향을 관리.
- **리드 개발자**: Kroah-Hartman, Thomas Gleixner, Ingo Molnar, Peter Zijlstra, Steven Rostedt, Russell King 등.
- **메인테이너**: 각 서브시스템의 책임자로, GIT 관리 및 패치 리뷰를 수행.
- **리뷰어**: 서브시스템 내에서 활발히 활동하며 메인테이너가 지정하는 역할.
- **컨트리뷰터**: 모든 개발자가 해당되며, 커널 코드에 기여.

## 2. SoC 벤더

### SoC란?
- SoC(System-on-Chip)는 하나의 칩에 컴퓨터 또는 다른 전자 시스템의 모든 구성 요소를 통합한 집적 회로를 의미합니다.
- 독립적인 컴퓨팅 기능을 수행할 수 있으며, 대표적인 SoC 벤더로는 브로드컴, 퀄컴, 미디어텍, 엔비디아 등이 있습니다.

### SoC 벤더 개발자의 역할
- **리눅스 커널 버전(LTS) 선택**: 각 SoC에 맞는 커널 버전을 선택하여 적용.
- **부트 롬과 부트로더 개발**: 칩을 초기화하고, 하드웨어 IP를 브링업하며 최적화하는 커널 드라이버를 구현.
- **협업**: Customer(OEM)와 긴밀하게 협력하여 개발을 진행.

### 주요 SoC 제품군
- **엔비디아**: 테그라 시리즈.
- **브로드컴**: BCM 시리즈 (예: 라즈베리 파이).
- **퀄컴**: 스냅드래곤 시리즈.
- **미디어텍**: 헬리오 시리즈.

### SoC 벤더 개발 프로세스 및 생태계
- SoC 벤더는 IP 설계부터 BSP 개발, 최종 소프트웨어 개발까지 여러 단계에서 리눅스 커널 커뮤니티 및 OEM 업체와 협력합니다.

## 3. OEM 제품 개발 업체

### OEM 업체 개발자의 역할
- SoC 벤더가 릴리스한 BSP(리눅스 커널 코드, 드라이버, 부트로더)를 받아 제품 스펙과 시나리오에 맞게 제품을 개발.
- SoC 벤더 개발자와 협력하여 제품을 브링업하고, 새로운 기능을 구현하며, 안정화 작업(버그 수정)을 진행.

### OEM 제품 시스템 소프트웨어 개발자의 역할
- 제품을 브링업하고 모든 기능을 안정화하며, SoC 벤더와 솔루션 업체와 협업하여 안정적인 제품을 개발.

## 4. 자동차 OEM

### 전기 자동차 개발 프로세스 및 생태계
- **마이컴(ECU)**: 운전자의 주행을 제어하는 CPU로, Cortex-M3 계열을 주로 사용하며 베어메탈 또는 RTOS로 운영.
- **자율 주행(ADAS)**: 차선 감지, 레이더 정보 제어 등을 위해 Cortex-Ax(Cortex-A72), Cortex-R 계열의 CPU를 사용하며, 하이퍼바이저와 RTOS를 활용.
- **인포테인먼트 시스템**: 네비게이션 및 운전자의 UX를 위한 시스템으로, Cortex-Ax 계열의 CPU와 리눅스 커널, 하이퍼바이저를 사용.

### 전기 자동차 시스템 소프트웨어 개발자의 역할
- 전장 솔루션의 모든 기능을 안정화하고, SoC 벤더 및 여러 솔루션 업체와 협력하여 안정적인 전기 자동차 시스템을 개발.

## 5. 리눅스 시스템 소프트웨어 개발자의 종류

### 1. OEM 업체
- 완성품 제조 업체(휴대폰, 디지털 TV, 스마트 가전)에서 부트로더와 리눅스 디바이스 드라이버를 개발.

### 2. 전장(전기자동차) 업체
- 자율 주행, 인포테인먼트, 마이컴을 위한 부트로더, 리눅스 디바이스 드라이버, 인증 프로세스를 개발.

### 3. 로컬 국내 임베디드 업체
- 수주를 받아 프로젝트를 진행하며, 제품 전체를 턴키로 개발. 하드웨어 성능 비중이 높은 업무를 수행.

### 4. SoC 시스템 소프트웨어 개발자
- 각 IP를 브링업하고 최적화하는 드라이버를 구현하며, GPU, 모뎀 인터페이스, Peripheral 드라이버 등을 개발.

### 5. CPU 아키텍처 개발자
- 컴파일러 커스터마이즈 및 신규 기능 구현, 운영체제(리눅스 커널, XEN 하이퍼바이저)에 CPU 아키텍처 코드 기여.

### 6. Linux Kernel Contributor
- 리눅스 커널 오픈 소스 프로젝트에 참여하여 서브 시스템의 기능 개선 및 안정화 작업을 수행.

#
# 시스템 소프트웨어 개발 과정 소개

## 1. 개요 (Overview)

시스템 소프트웨어 개발 과정은 매우 체계적이며, 각각의 단계가 중요합니다. 이 과정은 주로 하드웨어와 소프트웨어 간의 긴밀한 협력과 문제 해결 능력을 요구합니다.

### 업무 특징
- 시스템 소프트웨어 개발자의 기본 역량은 대부분 유사합니다.
- 개발 과정은 스펙 검토, 브링업, 버그 수정, 공장 양산 대응, 그리고 사후 관리로 구성됩니다.

## 2. 스펙 검토 (Specification Review)

시스템 소프트웨어 개발의 첫 단계는 스펙 검토입니다. 이 단계에서 하드웨어와 소프트웨어 요구사항을 철저히 분석합니다.

### 주요 활동
1. **하드웨어 부품 검토**: 제품의 특성에 따라 부품을 선정하고, 가격 경쟁력을 위해 부품을 교체할 수 있습니다.
2. **회로도 리뷰**: 저항, 전원 등에 대한 점검을 하드웨어 개발자와 공유하며 부트 모드를 설정합니다.
3. **소프트웨어 스펙 검토**: 리눅스 커널 버전을 선택하고, 디바이스의 스펙에 맞출 수 있는지를 검토합니다.

## 3. 브링업 (Bring-up)

브링업은 시스템 소프트웨어 개발의 첫 단계로, 디바이스를 처음으로 부팅시키는 작업입니다.

### 브링업 과정
- **브링업이란?**: 한 번도 부팅되지 않은 디바이스를 작동시키는 과정입니다.
- **주요 활동**:
  - 부트로더, 리눅스 드라이버 코드 수정.
  - UART 콘솔을 사용해 디바이스를 디버깅.
  - 디바이스의 부팅 문제 해결.

### 브링업 시 주의 사항
- 철저한 준비가 필요하며, 프로젝트 전체 일정에 영향을 미칩니다.
- 브링업 과정에서 발생하는 스트레스 관리가 중요합니다.
- 부팅이 안되면 빠르게 팀에 알리고, 다른 개발자의 도움을 받아야 합니다.

## 4. 버그 수정 (Bug Fix)

브링업과 기능 구현이 완료되면, 프로젝트는 안정화 단계로 넘어가며, 다양한 테스트를 통해 버그를 수정합니다.

### 버그 수정 과정
1. **문제 증상 확인**: 로그나 메모리 덤프를 통해 문제의 원인을 분석합니다.
2. **디버깅**: 문제를 분석하고, 원인을 파악합니다.
3. **패치 생성**: 문제를 해결할 수 있는 패치를 만들고, 이를 테스트하여 유효성을 검증합니다.

### 버그의 종류
- 크래시, 리셋.
- 성능 이슈: 시스템 느려짐, 화면 깨짐.
- 기능 동작 이슈: 스펙에 맞지 않는 동작.

## 5. 공장 양산 대응 (Factory Software)

소프트웨어 버전이 Freeze된 후에는 양산 대응이 시작됩니다. 이 과정에서 양산 라인에서 제품이 정상적으로 동작하는지 확인합니다.

### 주요 활동
- **Factory Software**: 부품이나 양산 제품이 제대로 동작하는지 체크하며, 이 과정에서 문제가 발생하면 시스템 소프트웨어 개발자가 공장을 방문하여 해결합니다.
- **Quality Control**: 센서, 카메라, 오디오 등 각종 부품이 정상적으로 동작하는지 검사합니다.

## 6. 사후 관리 (Post-Production Support)

제품이 시장에 출시된 후에는 사후 관리가 필요합니다. OTA를 통한 소프트웨어 업그레이드 및 고객 불만 대응이 포함됩니다.

### 주요 활동
- **OTA 업그레이드**: 제품의 소프트웨어를 무선으로 업그레이드.
- **고객 불만 대응**: 시장에서 발생하는 문제에 대해 빠르게 대응하고 해결합니다.

## 7. 시스템 소프트웨어 개발 과정 요약

시스템 소프트웨어 개발 과정은 다음과 같은 주요 단계로 이루어집니다:

1. **스펙 검토**: 하드웨어 및 소프트웨어 요구사항 분석.
2. **브링업**: 디바이스 부팅 및 초기화.
3. **버그 수정**: 시스템 안정화.
4. **공장 양산 대응**: 양산 라인에서의 소프트웨어 동작 확인.
5. **사후 관리**: 시장 출시 후 소프트웨어 유지보수 및 문제 해결.

이 모든 과정을 통해 제품이 성공적으로 시장에 출시되고, 안정적으로 운영될 수 있도록 지원합니다.

#
# 시스템 소프트웨어 개발 핵심 업무: 트러블 슈팅

## 1. 트러블슈팅이란?

트러블슈팅은 시스템 소프트웨어 개발에서 발생하는 다양한 문제를 해결하는 과정을 말합니다. 이는 개발 과정의 대부분을 차지하며, 크래시나 시스템 Freeze 이슈, 또는 브링업 도중 발생하는 문제들을 해결하는 데 주로 집중합니다.

### 트러블슈팅 프로세스

트러블슈팅 과정은 다음과 같은 단계로 진행됩니다:

1. **문제 증상 파악**:
   - 로그나 덤프 파일을 분석하여 문제의 증상을 이해합니다.
   - 문제가 발생한 커널 소스 코드를 처음부터 분석하거나 디버깅 툴을 사용해 현상을 확인합니다.

2. **디버깅 및 패치 생성**:
   - 문제의 원인을 파악한 후, 해당 문제를 해결할 수 있는 패치를 생성합니다.
   - 패치를 적용한 후 충분한 테스트를 진행합니다.

3. **자체 스트레스 테스트**:
   - 패치 적용 후 시스템에 사이드 이펙트(부작용)가 없는지 확인하기 위해 전체 테스트를 진행합니다.
   - 모든 테스트가 완료된 후 문제가 해결되었는지 최종 검증을 합니다.

## 2. 크래시란 무엇인가?

크래시는 컴퓨터 프로그램이나 운영체제가 정상적으로 작동하지 않고 중지되는 현상을 말합니다. 크래시는 주로 소프트웨어 버그로 인해 발생하며, 다양한 원인이 있을 수 있습니다.

### 크래시의 유형

1. **논리적인 오류**:
   - BUG, Panic, Fault, Exception, Watchdog Reset, Race Condition 등.

2. **하드웨어 문제**:
   - 메모리 비트 플립, 전원 불안정, 클락/파워 게이팅, 프로세서 내 버그 등.

### 크래시의 카테고리

1. **Userspace Crash**:
   - 예: Segmentation fault (core dumped)
   
2. **System Crash**:
   - 예: Kernel panic, BUG, Watchdog Reset

## 3. 크래시 분석을 위한 주요 지식

크래시를 분석하고 문제를 해결하기 위해서는 다음과 같은 지식이 필요합니다:

1. **Arm 아키텍처**:
   - 레지스터 세트, 어셈블리 언어, 익셉션 및 인터럽트 처리 방식.

2. **커널 주요 서브 시스템**:
   - 프로세스 관리, 인터럽트 처리, 시스템 콜, 시그널 메모리 관리, 동기화, 워크큐, Soft IRQ 등.

3. **디버깅 도구**:
   - 커널 로그, GDB, crash-utility, TRACE32, ftrace, vmcore 등의 사용법.

### 크래시 증상 예시

1. **Userspace Crash**: 
   - GDB로 분석한 백트레이스 (Backtrace) 예시.

2. **System Crash**: 
   - Kernel panic 발생 시의 로그 예시.
   - BUG 발생 시의 로그 예시.
   - 메모리 오염 (Memory Corruption) 시의 로그 예시.

## 4. 트러블슈팅의 중요성

- 트러블슈팅은 시스템의 안정성을 유지하기 위해 필수적인 과정입니다. 
- 개발자가 이러한 과정을 통해 시스템의 문제를 빠르게 해결함으로써 제품의 품질을 보장할 수 있습니다. 
트러블슈팅 과정에서 얻은 경험은 향후 비슷한 문제를 예방하는 데에도 큰 도움이 됩니다.
