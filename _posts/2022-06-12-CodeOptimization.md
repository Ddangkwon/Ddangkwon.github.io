---
layout : post
title : 코드 최적화(CodeOptimization)
comments : true
categories : 
- Embedded Engineering
tags : [Embedded Engineering]
---
# 코드 최적화

최적화의 등가교환(Trade-Off)

크기 vs 속도
성능 vs 가독성

임베디드 소프트웨어의 최적화 규칙

최선의 알고리즘, 최적의 코드를 찾아라
하드웨어 특성(프로세서), 개발 툴 등을 잘 이해하고 활용하라

헤더 인클루드 중복성 제거

```c
#ifndef FUNC_H// 정의가 되어있지 않을 경우 인클루드(딱 한번만 인클루드 하게 됨)
#define FUNC_H

/* 내용 */

#endif FUNC_H
```


# C에서 최적화를 위한 표현법

## 비용이 낮은 연산자를 선택하라

어셈블리 단에서 확인해보면, 나누기 곱셈과 같은 연산보다 비트 쉬프트 연산이 더 적은 명령어를 사용한다.
따라서 2의 지수 승의 나누기 곱셈 연산을 할 때는 쉬프트 연산을 활용하는 것이 좋다

## Short Circuit 원리의 활용

&& : 첫 비교문이 거짓이면 모두 거짓이므로, 뒤의 비교문은 보지 않는다.
=> 거짓의 확률이 높은 비교문을 앞에 둔다.
|| : 첫 비교문이 참이면 모두 참이 되므로 그 뒤의 비교문은 모두 수행하지 않는다.
=> 참의 확률이 높은 비교문을 앞에 둔다.

## 연관된 표현은 묶어서 처리한다

=> 이 부분의 경우 속도와 코드의 가독성의 Trade-off 관계

## 실수 연산


### 실수의 나누기는 느리다
실수에서 나누기의 연산은 상당히 많은 연산시간을 잡아먹는다.

### 가능하면 double 자료형 대신 float 자료형을 사용하라

### Math 라이브러리 함수를 되도록 사용하지 않는다
=> Math 라이브러리 함수들은 오버헤드가 크다.
=> 자주 사용되는 값을 테이블로 설정하여 사용한다.

### 가능하면 고정 소수점으로 변환하여 사용하라
